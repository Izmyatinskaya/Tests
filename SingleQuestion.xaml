<local:BaseQuestion x:Class="wpf_тесты_для_обучения.SingleQuestion"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:wpf_тесты_для_обучения"
             mc:Ignorable="d" 
             Foreground="{x:Null}" Background="White" d:DesignHeight="230" d:DesignWidth="255.">
    <UserControl.Resources>
        <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>

    <StackPanel>
        <!-- Верхняя панель с номером и удалением -->
        <DockPanel Margin="5">
            <TextBlock FontSize="18" FontWeight="Bold" Foreground="Black" 
                       Text="{Binding Number, StringFormat='{}{0}.', RelativeSource={RelativeSource AncestorType=UserControl}}" />
            <Button Name="deleteQuestionButton" Content="❌" Foreground="Red" Width="20" Height="20"
                    Background="Transparent" BorderThickness="0"
                    Click="DeleteBlock" DockPanel.Dock="Right"/>
            <!-- Поле для ввода вопроса -->
            <TextBox x:Name="questionTextBox"
                 Text="Введите вопрос?" 
                 FontSize="14" TextWrapping="Wrap" 
                 VerticalScrollBarVisibility="Auto" 
                 Margin="5" PreviewMouseLeftButtonUp="questionTextBox_PreviewMouseLeftButtonUp" KeyDown="questionTextBox_KeyDown" TextChanged="questionTextBox_TextChanged" />

            <TextBlock x:Name="questionTextBlock" Visibility="Collapsed" FontSize="14" TextWrapping="Wrap" Margin="5" Foreground="Black"/>
            
        </DockPanel>


            <!-- Само изображение (отображается, если выбрано) -->
        <Image Name="image" Source="{Binding ImageSource}"
           Visibility="{Binding ShowImage, Converter={StaticResource BooleanToVisibilityConverter}}" Cursor="Hand" MouseDown="image_MouseDown_1" MaxHeight="500"/>
        <!--<Button Name="fullImageButton" Click="ShowFullImage" Width="14" Height="13">
                <Button.Background>
                    <ImageBrush ImageSource="/page_white_magnify.png"/>
                </Button.Background>
            </Button>-->

        <!-- Список ответов -->
        <StackPanel x:Name="AnswersPanel" Margin="5"/>

        <!-- Кнопка добавления нового ответа -->
        <Button Name="addAnswerButton" Content="➕ Добавить ответ" Click="AddAnswer" Margin="5"/>

        <!-- Поле ошибок -->
        <TextBlock x:Name="ErrorTextBlock" Foreground="Red" Visibility="Collapsed"/>
    </StackPanel>
</local:BaseQuestion>